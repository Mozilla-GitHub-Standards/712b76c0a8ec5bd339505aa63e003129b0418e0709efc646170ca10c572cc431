function GeoDB(e,t){"use strict";var n=Joi.object().keys({IP:Joi.string().required()}),r=Joi.validate({IP:e},n);if(r.error)return Promise.reject({message:r.error.details[0].message});if(!maxmind.validate(e))return Promise.reject({message:ERRORS.IS_INVALID});try{var i=maxmind.open(db),s=i.get(e)}catch(r){return Promise.reject({message:ERRORS.UNABLE_TO_FETCH_DATA})}return Promise.resolve({country:s.country.names.en,city:s.city.names.en,continent:s.continent.names.en,ll:{latitude:s.location.latitude,longitude:s.location.longitude},time_zone:s.location.time_zone,local_time:(new Date(t)).toLocaleString("en",{timeZone:s.location.time_zone}),cityData:s})}const db="../db/cities-db.mmdb",maxmind=require("maxmind"),ERRORS=require("../lib/errors"),Promise=require("bluebird"),Joi=require("joi");module.exports=GeoDB,define("fxa-geodb",function(){});